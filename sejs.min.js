(function(e){if(typeof exports==="undefined"){this.sejs=e}else{module.exports=exports=e}})(function(e){e=e.replace("\r","");var s=e.split("\n");var a=[];var r=[];var n=[];var t=1;var i=false;var u=false;var f=-1;var l=e.length;var h=function(){if(a.length){a=a.join("");if(u){a=a.trim();r.push(i?"(n="+t+",l='"+s[t]+"',"+a+")":a);i=false}else{r.push("'"+a+"'")}a=[]}};var o=function(){if(r.length){n.push("b.push("+r.join(",")+");");r=[]}};while(++f<l){switch(e[f]+e[f+1]){case"<%":h();if(e[f+2]==="="){u=true;f++}f++;break;case"%>":if(u){h();u=false}else{o();if(i){n.push("n="+t+";l='"+s[t]+"';");i=false}n.push(a.join("").trim());a=[]}f++;break;default:switch(e[f]){case"\n":i=true;a.push("\\n");t++;break;case"\\":a.push("\\\\");break;default:a.push(e[f]);break}}}h();o();return new Function("d","try{var n=1,b=[],l='"+s[0]+"';with(d||{}){"+n.join("")+"}return b.join('');}catch(e){e.message=n+'\\n'+e.message;throw e;}")});