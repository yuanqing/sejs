(function(e){if(typeof exports==="undefined"){this.sejs=e}else{module.exports=exports=e}})(function(e){e=e.replace("\r","");var n=e.split("\n");var s=[];var a=[];var r=[];var t=1;var i=false;var u=false;var l=-1;var f=e.length;var h=function(){if(s.length){s=s.join("");if(u){s=s.trim();a.push(i?"(n="+t+",l='"+n[t-1]+"',"+s+")":s);i=false}else{a.push("'"+s+"'")}s=[]}};var o=function(){if(a.length){r.push("b.push("+a.join(",")+");");a=[]}};while(++l<f){switch(e[l]+e[l+1]){case"<%":h();if(e[l+2]==="="){u=true;l++}l++;break;case"%>":if(u){h();u=false}else{o();if(i){r.push("n="+t+";l='"+n[t-1]+"';");i=false}r.push(s.join("").trim());s=[]}l++;break;default:switch(e[l]){case"\n":i=true;s.push("\\n");t++;break;case"\\":s.push("\\\\");break;default:s.push(e[l]);break}}}h();o();return new Function("d","try{var b=[],n=1,l='"+n[0]+"';with(d||{}){"+r.join("")+"}return b.join('');}catch(e){e.message='\\n  '+n+'| '+l+'\\n\\n'+e.message;\n  throw e;\n}")});