(function(e){if(typeof exports==="undefined"){this.tmplt=e}else{module.exports=exports=e}})(function(e){e=e.replace("\r","");var a=[];var r=[];var s=[];var n=1;var t=false;var i=false;var u=-1;var l=e.length;var f=e.split("\n");var h=function(){if(s.length){s=s.join("");if(i){s=s.trim();r.push(t?"(n="+n+",l='"+f[n]+"',"+s+")":s);t=false}else{r.push("'"+s+"'")}s=[]}};var o=function(){if(r.length){a.push("b.push("+r.join(",")+");");r=[]}};while(++u<l){switch(e[u]+e[u+1]){case"<%":h();if(e[u+2]==="="){i=true;u++}u++;break;case"%>":if(i){h();i=false}else{o();if(t){a.push("n="+n+";l='"+f[n]+"';");t=false}a.push(s.join("").trim());s=[]}u++;break;default:switch(e[u]){case"\n":t=true;s.push("\\n");n++;break;case"\\":s.push("\\\\");break;default:s.push(e[u]);break}}}h();o();return new Function("d","try{var n=1,b=[],l='"+f[0]+"';with(d||{}){"+a.join("")+"}return b.join('');}catch(e){e.message=n+'\\n'+e.message;throw e;}")});